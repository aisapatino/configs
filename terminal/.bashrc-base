# Settings
#----------

export EDITOR=vim
export VISUAL=$EDITOR

HISTCONTROL=ignoreboth     # ignore duplicates & commands starting with space
HISTIGNORE="ls:ll:cd *"    # ignore frequent short commands
HISTSIZE=1000              # double the default
shopt -s histappend        # add to existing history instead of overwriting

# Colors
#--------

export TERM=xterm-256color
export CLICOLOR=1

BLUE='\[\e[1;34m\]'
RESET='\[\e[m\]'

# Prompt
#--------

GIT_PS1_SHOWUPSTREAM=1     # indicate ahead/behind upstream
GIT_PS1_SHOWCOLORHINTS=1   # color like git status for untracked/modified

source ~/.git-prompt.sh

PROMPT_COMMAND='__git_ps1 "$BLUE\w$RESET" " $BLUE\$$RESET "'

# Autocomplete
#--------------

if [ -f ~/.git-completion.bash ]; then
  . ~/.git-completion.bash
fi

# Autocomplete for 'g' as well
complete -o default -o nospace -F _git g

# Aliases
#---------

alias ll="ls -la"
alias g="git"
alias gk="gitk --all"
alias gs="git status"
alias gd="git diff"

alias npmlist="npm ls --depth=0"

# -C = color, -d = dirs only, -I = ignore, -L = max depth level
IGNORE="node_modules|.git|*bower_components|.DS_Store|*.pyc"
alias t="tree -a -C --dirsfirst -I '$IGNORE' -L "
alias trd="tree -a -C -d -I '$IGNORE'"

# Custom functions
#------------------

sr() {
  echo "replacing $1 with $2 in files matching $3"
  echo "(if the match looks wrong, make sure you put quotes around it)"
  find . -iname "$3" -print | xargs sed -i "s/$1/$2/g"
}

# Initialize Ruby
#-----------------

if [ -d ~/.rbenv ] ; then
  eval "$(rbenv init -)"
fi
